{% extends "base.html" %}

{% block title %}文章创作 - 知乎简易版{% endblock %}

{% block header_title %}文章创作{% endblock %}

{% block content %}
<div class="card">
      <div style="margin-bottom: 20px;">
            <a href="{{ url_for('essay') }}" class="btn">返回文章列表</a>
      </div>

      <div class="card">
            <h2>创作新文章</h2>
            <div class="alert alert-info">请填写完整的文章标题和内容后提交</div>

            <form method="post" action="{{ url_for('essay_add') }}">
                  <div class="form-group">
                        <label for="essay_title">文章标题</label>
                        <input type="text" id="essay_title" name="文章标题" class="form-control" placeholder="请输入文章标题"
                              required>
                  </div>

                  <div class="form-group">
                        <label for="essay_content">文章内容</label>
                        <textarea id="essay_content" name="文章内容" class="form-control" rows="10"
                              placeholder="请在此输入文章内容..." required></textarea>
                  </div>

                  <div class="form-group">
                        <button type="submit" class="btn btn-success">发布文章</button>
                  </div>
            </form>
      </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
      document.addEventListener('DOMContentLoaded', function () {
            // 表单提交前验证
            document.querySelector('form').addEventListener('submit', function (e) {
                  const title = document.getElementById('essay_title');
                  const content = document.getElementById('essay_content');

                  if (!title.value.trim() || !content.value.trim()) {
                        e.preventDefault();
                        showAlert('请填写完整的文章标题和内容', 'error');

                        if (!title.value.trim()) {
                              title.focus();
                        } else {
                              content.focus();
                        }
                  }
            });
      });
</script>
{% endblock %}